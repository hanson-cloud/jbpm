[模块版本号] 4.5.2#20161220-1
[修改人姓名] 刘世清
[最后修改日期] 20161220
     
[修改文件]   
 	/com.suntek.jbpm2/src/com/suntek/jbpm/web/service/PrintWorkSheetService.java
[新增文件]
 	
[修改问题］
 	1. 工单打印的时候转义特殊字符&
[新增功能]
	
[新增配置]	
	无
[兼容性]
	无
[升级注意事项]
	
	
	
	
*****************************************************************************
[模块版本号] 4.5.2#20160812-1
[修改人姓名] 刘世清
[最后修改日期] 20160812
     
[修改文件]   
 	
[新增文件]
 	
[修改问题］
 	1. bpm_task表的每个处理过程都增加处理期限的记录，记录在due_time字段
[新增功能]
	
[新增配置]	
	无
[兼容性]
	无
[升级注意事项]
	
	
	
	
*****************************************************************************
[模块版本号] 4.5.2#20160721-1
[修改人姓名] 刘世清
[最后修改日期] 
     
[修改文件]   
 	
[新增文件]
 	
[修改问题］
 	1. 修改预警告警的sql，提升查询性能
[新增功能]
	
[新增配置]	
	无
[兼容性]
	无
[升级注意事项]
	
	
	
	
*****************************************************************************
[模块版本号] 4.5.2#20160223-1
[修改人姓名] 唐磊
[最后修改日期] 
     
[修改文件]   
 	
[新增文件]
 	
[修改问题］
 	1. 修改打印时采用实现IPrintProvider接口，可以支持继续实现IComponentAdvice接口中的before，after方法，打印可以获取当前request对象
[新增功能]
	
[新增配置]	
	无
[兼容性]
	无
[升级注意事项]
	
	
	
	
*****************************************************************************
[模块版本号] 4.5.1#20151008-1
[修改人姓名] 唐磊
[最后修改日期] 
     
[修改文件]   
 	
[新增文件]
 	
[修改问题］
 	1. 修改节点判断表达式求职时，会出现小概率判断不准确的问题
[新增功能]
	
[新增配置]	
	无
[兼容性]
	无
[升级注意事项]
	
	
	
	
*****************************************************************************

[模块版本号] 4.5.0#20150819-1
[修改人姓名] 唐磊
[最后修改日期] 
     
[修改文件]   
 	
[新增文件]
 	
[修改问题］
 	1. 新增ProcessInstanceService类，提供新建工单和工单流转的接口
[新增功能]
	
[新增配置]	
	无
[兼容性]
	无
[升级注意事项]
	
	
	
	
*****************************************************************************
[模块版本号] 4.4.9#20150813-1
[修改人姓名] 唐磊
[最后修改日期] 
     
[修改文件]   
 	
[新增文件]
 	
[修改问题］
 	1. 修改保存表单数据时，如果entityClass配置了BpmBiz才将数据更新到BPM_BIZ表中
[新增功能]
	
[新增配置]	
	无
[兼容性]
	无
[升级注意事项]
	
	
	
	
*****************************************************************************
[模块版本号] 4.4.8#20150703-1
[修改人姓名] 唐磊
[最后修改日期] 
     
[修改文件]   
 	
[新增文件]
 	
[修改问题］
 	1. 修改写入TASK表时，ASSIGN_TIME取数据库时间取错的问题
[新增功能]
	
[新增配置]	
	无
[兼容性]
	无
[升级注意事项]
	
	
	
	
*****************************************************************************
[模块版本号] 4.4.7#20150522-1
[修改人姓名] 唐磊
[最后修改日期] 
     
[修改文件]   
 	
[新增文件]
 	
[修改问题］
 	1. 修改sqlserver保存jbpm表不成功的问题
[新增功能]
	
[新增配置]	
	无
[兼容性]
	无
[升级注意事项]
	
	
	
	
*****************************************************************************
[模块版本号] 4.4.6#20150520-1
[修改人姓名] 唐磊
[最后修改日期] 
     
[修改文件]   
 	
[新增文件]
 	
[修改问题］
 	1. BpmBiz类增加属性requestSubjectCode ：涉事主题编号
[新增功能]
	
[新增配置]	
	无
[兼容性]
	无
[升级注意事项]
	
	
	
	
*****************************************************************************
[模块版本号] 4.4.5#20150127-1
[修改人姓名] 唐磊
[最后修改日期] 
     
[修改文件]   
 	
[新增文件]
 	
[修改问题］
 	1. 增加BPM_BIZ表KEY_WORD 关键字字段
 	2. 写入BPMZ_TASK表中，大写的CALL_ID取不到时，取小写的callId
[新增功能]
	
[新增配置]	
	无
[兼容性]
	无
[升级注意事项]
	
	
	
	
*****************************************************************************
[模块版本号] 4.4.4#20141103-1
[修改人姓名] 唐磊
[最后修改日期] 
     
[修改文件]   
 	
[新增文件]
 	
[修改问题］
 	1. 增加BPM_BIZ表RETURN_OT_DAYS 逾期退单天数字段
[新增功能]
	
[新增配置]	
	无
[兼容性]
	无
[升级注意事项]
	
	
	
	
*****************************************************************************
[模块版本号] 4.4.3#20141015-1
[修改人姓名] 唐磊
[最后修改日期] 
     
[修改文件]   
 	
[新增文件]
 	
[修改问题］
 	1. 修改经过分支节点时，TRANS_NAME取分支节点的transation名称
 	2. 增加处理过程接口添加时间参数
[新增功能]
	
[新增配置]	
	无
[兼容性]
	无
[升级注意事项]
	
	
	
	
*****************************************************************************
[模块版本号] 4.4.2#20140925-1
[修改人姓名] 唐磊
[最后修改日期] 
     
[修改文件]   
 	
[新增文件]
 	
[修改问题］
 	1. 修改BpmBiz增加自动isEnglish 
[新增功能]
	
[新增配置]	
	无
[兼容性]
	无
[升级注意事项]
	
	
	
	
*****************************************************************************
[模块版本号] 4.4.1#20140825-1
[修改人姓名] 唐磊
[最后修改日期] 
     
[修改文件]   
 	
[新增文件]
 	
[修改问题］
 	1. 修改BpmBiz增加字段questionType
[新增功能]
	
[新增配置]	
	无
[兼容性]
	无
[升级注意事项]
	
	
	
	
*****************************************************************************
[模块版本号] 4.4.0#20140805-1
[修改人姓名] 唐磊
[最后修改日期] 
     
[修改文件]   
 	
[新增文件]
 	
[修改问题］
 	1. 修改协办时将当前处理人所在部门的所有待办记录全部更新为已协办
[新增功能]
	
[新增配置]	
	无
[兼容性]
	无
[升级注意事项]
	
	
	
	
*****************************************************************************

[模块版本号] 4.3.9#2014428-1
[修改人姓名] 唐磊
[最后修改日期] 
     
[修改文件]   
 	
[新增文件]
 	
[修改问题］
 	1. 增加setCcUserInDept和setCoUserInDept接口，表示部门抄送和部门协办模式
[新增功能]
	
[新增配置]	
	无
[兼容性]
	无
[升级注意事项]
	
	
	
	
*****************************************************************************
[模块版本号] 4.3.8#2014410-1
[修改人姓名] 唐磊
[最后修改日期] 
     
[修改文件]   
 	
[新增文件]
 	
[修改问题］
 	1. 修改ReOpenAction报错的问题
 	2. 修改打印工单时word格式含有&会报错的问题
[新增功能]
	
[新增配置]	
	无
[兼容性]
	无
[升级注意事项]
	
	
	
	
*****************************************************************************
[模块版本号] 4.3.7#20140331-1
[修改人姓名] 唐磊
[最后修改日期] 
     
[修改文件]   
 	
[新增文件]
 	
[修改问题］
 	1. 修改部门派单模式下更新deal_flag条件不应按部门ID, 应该按当前处理人, 因为当前处理人已提取, dealer已更新为自己的工号
 	2. 修改BpmBiz 生成SQL语句时int型属性默认为-1, 不进行update(原来默认是0)
[新增功能]
	
[新增配置]	
	无
[兼容性]
	无
[升级注意事项]
	
	
	
	
*****************************************************************************
[模块版本号] 4.3.6#20140325-1
[修改人姓名] 唐磊
[最后修改日期] 
     
[修改文件]   
 	
[新增文件]
 	
[修改问题］
 	1. 修改持久化BPM_BIZ表时, CLOB字段单独用CLOB处理
[新增功能]
	
[新增配置]	
	无
[兼容性]
	无
[升级注意事项]
	
	
	
	
*****************************************************************************
[模块版本号] 4.3.6#20140324-1
[修改人姓名] 唐磊
[最后修改日期] 
     
[修改文件]   
 	
[新增文件]
 	
[修改问题］
 	1. 修改工单抢占处理时, 别人处理提示不正确的问题
 	2. BpmBiz类增加dispatchUid熟悉, 表示派单人
[新增功能]
	
[新增配置]	
	无
[兼容性]
	无
[升级注意事项]
	
	
	
	
*****************************************************************************
[模块版本号] 4.3.6#20140320-1
[修改人姓名] 唐磊
[最后修改日期] 
     
[修改文件]   
 	
[新增文件]
 	
[修改问题］
 	1. 修改使用部门角色派单时, 数据库DEAL_DEPTID没有数据的问题
[新增功能]
	
[新增配置]	
	无
[兼容性]
	无
[升级注意事项]
	
	
	
	
*****************************************************************************
[模块版本号] 4.3.5#20140220-1
[修改人姓名] 唐磊
[最后修改日期] 
     
[修改文件]   
 	
[新增文件]
 	
[修改问题］
 	1. 修改运算到期时限时间为该天的23:59:59
 	2. 修改saveForm方法保存数据大时报错的问题, SaveFormSubmitService的持久化方法改为绑定变量即可
 	3. 修改持久化方法单独处理Oracle 的CLOB型
[新增功能]
	
[新增配置]	
	无
[兼容性]
	无
[升级注意事项]
	
	
	
	
***************************************************************************** 
[模块版本号] 4.3.4#20140123-1
[修改人姓名] 唐磊
[最后修改日期] 
     
[修改文件]   
 	
[新增文件]
 	
[修改问题］
 	1. 修改工单分派到人时, 取其所属部门编号不从缓存中取, 将实时查询数据库
[新增功能]
	
[新增配置]	
	无
[兼容性]
	无
[升级注意事项]
	
	
	
	
***************************************************************************** 

[模块版本号] 4.3.3#20140114-1
[修改人姓名] 唐磊
[最后修改日期] 
     
[修改文件]   
 	
[新增文件]
 	
[修改问题］
 	1.修改处理期限时间为实际到期时间的下一天的凌晨0点
 	2.修改调用修改表单接口时, 写处理过程没有部门名称的问题
 	3.修改缓存组织架构调度时不清理之前记录的问题
[新增功能]
	
[新增配置]	
	无
[兼容性]
	无
[升级注意事项]
	
	
	
	
***************************************************************************** 
[模块版本号] 4.3.2#20140109-1
[修改人姓名] 唐磊
[最后修改日期] 
     
[修改文件]   
 	
[新增文件]
 	
[修改问题］
 	1.修改撤回接口时没有更新BPM_BIZ LAST_TASKID的问题
 	2.修改生成主键ID时统一加上openeap节点名的后一位
[新增功能]
	
[新增配置]	
	无
[兼容性]
	无
[升级注意事项]
	升级需要升级表脚本
	
	
	
***************************************************************************** 
[模块版本号] 4.3.1#20131231-1
[修改人姓名] 唐磊
[最后修改日期] 
     
[修改文件]   
 	
[新增文件]
 	1.增加流程派发是可以把context写入文件的功能, 需要将jbpm.war的WriteContextFile设置为true
[修改问题］
 	
[新增功能]
	
[新增配置]	
	无
[兼容性]
	无
[升级注意事项]
	升级需要升级表脚本
	
	
	
***************************************************************************** 

[模块版本号] 4.3.1#20131228-1
[修改人姓名] 唐磊
[最后修改日期] 
     
[修改文件]   
 	
[新增文件]
 	
[修改问题］
 	1.修改新建工单时参数为草稿(IS_DRAFT=true) 工单不写DEADLINE_DAYS的问题
 	2.修改写入处理过程BPM_TASK中ASSIGN_MEMO为最大长度4000字符
[新增功能]
	
[新增配置]	
	无
[兼容性]
	无
[升级注意事项]
	升级需要升级表脚本
	
	
	
***************************************************************************** 

[模块版本号] 4.3.0#20131212-1
[修改人姓名] 唐磊
[最后修改日期] 
     
[修改文件]   
 	
[新增文件]
 	
[修改问题］
 	1.修改之前添加抄送接口后SQL报错的问题
[新增功能]
	1.新增业务表控制, 增加工单通用业务表BPM_BIZ, 默认绑定表单数据写入
	2.新增设置协办结果, ExecutionContext中Assignable中的setCoDealId方法
	3.增加BPM_TASK表CC_DEALER, CO_DEALER字段, 用于显示待处理抄送人和待处理协办人
	4.增加BPM_ASSIGN表CO_FLAG字段, 用于标识是否抄送
	5.增加DealCooperateAction接口, 用于执行添加协办意见
	6.增加SetTimeLimitAction接口, 用于延期处理
	7.增加流程配置文件中event节点, <event>处理类</event>, 其中处理类需继承OverTimeEventHandler抽象类并实现handle接口.
	   其中传入参数为EventInfo类型, 包括事件类型, 事件目标对象EventTargetUser
	8.增加工单锁定功能, 半小时无人处理自动解锁, 访问别人锁定的工单则提示是否继续处理
	9.优化提交时的批量执行语句
	10.增加督办接口SuperviseAction().execution(isntId, taskId, dealId, msg, level)
	11.提交语句全面改为绑定变量方式, 增加ExcetionContext中addSQL方法增加参数Obejct[], 为具体的绑定变量数组
	12.processdefinition.xml中根节点加载entity="BpmBiz"属性时, 会自动写入通用业务表, 
	      如果指定是某个类路径, 则采用hibernate持久化该 类实例  ,不写此属性将不会插入通用业务表 
[新增配置]	
	无
[兼容性]
	无
[升级注意事项]
	修改了表结构, 请参阅4.3.2#20131107-1版本号的jbpm.war中的升级事项
	
***************************************************************************** 
[模块版本号] 4.2.1#20131031-1
[修改人姓名] 唐磊
[最后修改日期] 
     
[修改文件]   
 	
[新增文件]
 	
[修改问题］
 	
[新增功能]
	1.新增Decision节点可以添加handler处理类, 需要实现DecisionHandler接口的execute方法,返回下一个节点的名称即可
[新增配置]	
	无
[兼容性]
	无
[升级注意事项]
	无
	
***************************************************************************** 
[模块版本号] 4.2.0#20130704-1
[修改人姓名] 唐磊
[最后修改日期] 
     
[修改文件]   
 	
[新增文件]
 	
[修改问题］
 	1.修改提交工单返回response接口, 加入是否关闭工单表单参数返回给页面
[新增功能]
	
[新增配置]	
	无
[兼容性]
	无
[升级注意事项]
	无
	
***************************************************************************** 
[模块版本号] 4.1.9#20130618-1
[修改人姓名] 唐磊
[最后修改日期] 
     
[修改文件]   
 	
[新增文件]
 	
[修改问题］
 	1.修改通过在Handler中调用ExecutionContext的getTriggerTransitionName() 取不到值的问题
[新增功能]
	
[新增配置]	
	无
[兼容性]
	无
[升级注意事项]
	无
	
***************************************************************************** 

[模块版本号] 4.1.8#20130609-1
[修改人姓名] 唐磊
[最后修改日期] 
     
[修改文件]   
 	
[新增文件]
 	
[修改问题］
 	1.修改打印时excel模板存放的位置改为工单名字目录里
[新增功能]
	
[新增配置]	
	无
[兼容性]
	无
[升级注意事项]
	无
	
***************************************************************************** 
[模块版本号] 4.1.8#20130506-1
[修改人姓名] 唐磊
[最后修改日期] 
     
[修改文件]   
 	
[新增文件]
 	
[修改问题］
 	1.修改工单打印报错的问题
 	2.修改工单打印导出文件中加入工单号
[新增功能]
	
[新增配置]	
	无
[兼容性]
	无
[升级注意事项]
	无
	
***************************************************************************** 
[模块版本号] 4.1.7#20130427-1
[修改人姓名] 唐磊
[最后修改日期] 
     
[修改文件]   
 	
[新增文件]
 	
[修改问题］
 	1.修改工单提交时把回车换成<br>的问题
[新增功能]
	
[新增配置]	
	无
[兼容性]
	无
[升级注意事项]
	无
	
***************************************************************************** 	

[模块版本号] 4.1.6#20130409-1
修改人姓名：唐磊
修改文件清单：
修改的功能
   	1.修改sybase下提交工单报错的问题
新增配置
	无   	
兼容性
 	
 	
 	
*****************************************************************************
[模块版本号] 4.1.5#20130403-1
修改人姓名：唐磊
修改文件清单：
修改的功能
   	1.修改了提交工单时取callId的方式
新增配置
	无   	
兼容性
 	
 	
 	
*****************************************************************************
[模块版本号] 4.1.4#20130320-1
修改人姓名：唐磊
修改文件清单：
修改的功能
   	1.工流转时将往BPM_TASK中写入CALL_ID
新增配置
	无   	
兼容性
 	需升级表脚本, BPM_TASK中增加CALL_ID字段
 	
 	
*****************************************************************************
[模块版本号] 4.0.2#20120311-1

修改人姓名：唐磊
修改文件清单：
修改的功能
   	1.在表达保存接口中,增加参数type, 如果在之后的节点要修改之前的节点表单数据, 则type送值为'update'
新增配置
	无   	
兼容性
 	无
*****************************************************************************
[模块版本号] 4.0.1#20120302-1

修改人姓名：唐磊
修改文件清单：
修改的功能
   	1.删除所有BIZ_ID字段, 改用INST_ID
新增配置
	无   	
兼容性
 	需要重新创建表结构
*****************************************************************************
[模块版本号] 3.6.1#20120611-1

修改人姓名：唐磊
修改文件清单：
修改的功能
   	1.增加了"重新打开工单"的权限
   	2.增加了AppointmentReminder工具类, 使用AppointmentReminder.sendFromPortal(String[] agentIds, String msg, Date sendDate)
   		方法可以在指定日期sendDate给agentIds发送消息msg
   	3. 增加打开工单浏览窗口时, 传入的url自定义参数也可以在工单界面中获取到
新增配置
	无   	
兼容性
 	无
*****************************************************************************
[模块版本号] 3.6.1#20120516-1

修改人姓名：唐磊
修改文件清单：
修改的功能
   	1.增加流程处理中可以使用instanceContxt.appendRuntimeVariable(Context.values.REMIND_MSG, "重要紧急"); 
   	      接口来利用此条处理任务的催单信息增加而外的紧急标识
   	2.修改表单保存接口, 保存中title大于950长度时自动截取
新增配置
	无   	
兼容性
 	无
***************************************************************************** 
[模块版本号] 3.6.1#20120509-1

修改人姓名：唐磊
修改文件清单：
修改的功能
   	1.修改在流程定义中增加linkPage时显示不出的问题
新增配置
	无   	
兼容性
 	无
***************************************************************************** 
[模块版本号] 3.6.1#20120313-1

修改人姓名：唐磊
修改文件清单：
修改的功能
   	1.修改保存草稿时插入标题过大数据库报错的问题
   	2.修改查看处理过程中附件意见一栏的时间不能显示秒的问题
新增配置
	无   	
兼容性
 	无
***************************************************************************** 	
[模块版本号] 3.6.1#20120313-1

修改人姓名：周涛
修改文件清单：
修改的功能
   	1.优化了工单查询语句。当前表支持查询统计，历史表不做实时统计。
   	2.在查询列表语句中，增加 maxrows 限制。
   	3.把持久化的context更新为json数据格式。
   	4.提交处理时，backup步骤分离一个事务进行处理，减小提交阶段的事务大小。
新增配置
	无   	
兼容性
 	无
***************************************************************************** 	
[模块版本号] 3.5.3#20120110-1

修改人姓名：周涛
修改文件清单：
修改的功能
   	1.增加多人平行流程模式
新增配置
	无   	
兼容性
 	无
*****************************************************************************
[模块版本号] 3.5.3#20120110-1

修改人姓名：周涛
修改文件清单：ExecutionContextSQLHelper.java
修改的功能
   	1.把 ExecutionContext对SQL的操作，移出到的接口实现 ExecutionContextSQLHelper 里面。
   	2.修改增加了 工单处理的 api接口。
新增配置
	无   	
兼容性
 	无
***************************************************************************** 	
[模块版本号] 3.5.2#20120110-1

修改人姓名：周涛
修改文件清单：MyTodoWorklist.html
修改的功能
   	1.增加了已发工单回撤按钮的功能权限限制。
新增配置
	在流程模块需要添加<回撤工单>的功能按钮，通过角色分配之后，才能显示回撤按钮。   	
兼容性
 	无
***************************************************************************** 	
[模块版本号] 3.4.8#20111115-1
  修改人姓名：周涛
   最后修改时间：2011-11-15
   修改文件清单：
   修改的功能：
   1. 处理了 ClassLoaderUtil.getStreamByExtendResource 关闭 输入输出流的问题